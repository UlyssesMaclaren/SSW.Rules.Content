---
type: rule
title: Do you use Asynchronous method and CallBack when invoke web method?
uri: do-you-use-asynchronous-method-and-callback-when-invoke-web-method
created: 2009-05-13T07:06:50.0000000Z
authors:
- id: 1
  title: Adam Cogan
- id: 17
  title: Ryan Tee

---

 This field should not be null (Remove me when you edit this field). private static string LoadContentFromWeb(string strUri) 

{ 
... 

WebResponse response = request.GetResponse(); 

...
} Figure: Invoke web method by the normal way (Bad - because this will hang your UI thread) 
The correct way to invoke web method is using asynchronous call to send a request and use the delegated CallBack method to read the response, see code below:
 public static void GetOnlineVersionAsync(string strUri) 
{ 
    try
    {
     ...

        IAsyncResult r = request.BeginGetResponse(new AsyncCallback(ResCallBack), request);
     }
     catch(WebException ex)
    {
        Console.WriteLine(ex.ToString()) ; 
     }
}



private static void ResCallBack(IAsyncResult ar)
{
   try
   {
      string content = string.Empty;
      WebRequest req = (WebRequest)ar.AsyncState;
      WebResponse response = req.EndGetResponse(ar);

      ...

      RaiseOnProductUpdateResult(content);

   }
   catch(WebException ex)
   {
      Console.WriteLine(ex.ToString());
      RaiseOnProductUpdateResult(string.Empty);
    }
} Figure: Invoke web method by using asynchronous method and CallBack (Good - UI thread will be free once the request has been sent) 
When working with Web Service, asynchronous methods will be automatically generated by your web services proxy.
![](/Standards/SoftwareDevelopment/RulesToBetterDotNETProjects/PublishingImages/AsyncCallBack-Rulest1.gif)Figure: Automatically generated asynchronous methods
